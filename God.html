<!DOCTYPE html>
<html lang="ja"><!--言語-->
<head><!--Webサイトの仕様-->
    <meta charset="UTF-8"><!--文字コード-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><!--画面の幅-->
    <title>God</title><!--タブ名-->
    <meta name="description" content=""><!--概要-->
    <link rel="stylesheet" href="HTML/css/reset.css"><!--ファイルの読み込み-->
    <link rel="stylesheet" href="HTML/css/God_style.css">

    <!--画像の拡大(image)-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js" type="text/javascript"></script>

    <script src="HTML/js/Image.js"></script>
</head>

<body><!--表示内容-->
    <div class="header">
        <ul>
            <li><a href="index.html">ゲーム作品</a></li>
            <li><a href="https://ocsjoho-my.sharepoint.com/:f:/g/personal/214039_ocsjoho_onmicrosoft_com/EjnuWKrA6udHhrjhIQxzEioBkgGH0Q7GFl1db56qVGBcTw?e=qmbxkW" title="Onedriveの共有フォルダにアクセスします">ダウンロード</a></li>
        </ul>
    </div>
    <h2 class="title" data-label="神隠し">SPIRITED AWAY</h2>
    <ul class="list">
        <li><a href="#Introduction">はじめに</a></li>
        <li><a href="#Movie">動画</a></li>
        <li><a href="#Image">写真</a></li>
        <li><a href="#Blueprint">Blueprint</a></li>
        <li><a href="#Blender">Blender</a></li>
    </ul>
    <div class="container">
        <div class="introduction">
            <a id="Introduction"><h2 data-number="01">Introduction</h2></a>
            <p>Unreal Engine 5.3.1で制作した和風ホラーゲームです。Unreal Engineで制作するゲームの3作品目であり、初めて完成することができました。Unreal Engineの機能であるBlueprintを使用して制作しました。</p>
        </div>
        <div class="movie">
            <a id="Movie"><h2 data-number="02">Movie</h2></a>
            <video src="HTML\mov\プレイ映像_神隠し.mp4" controls></video>
            <p>※カットを多用しています。</p>
        </div>
        <div class="image">
            <a id="Image"><h2 data-number="03">Image</h2></a>
            <p>ゲーム画面やお気に入りの場所、動画で見せれなかった部分について紹介します。クリックで画像拡大できます。</p>
            <div class="image_block">
                <a href="HTML\img\UE_滝.png" data-lightbox="group"><img src="HTML\img\UE_滝.png"></a>
                <a href="HTML\img\UE_玄関.png" data-lightbox="group"><img src="HTML\img\UE_玄関.png"></a>
                <a href="HTML\img\UE_食堂.png" data-lightbox="group"><img src="HTML\img\UE_食堂.png"></a>
                <a href="HTML\img\UE_中庭.png" data-lightbox="group"><img src="HTML\img\UE_中庭.png"></a>
                <a href="HTML\img\UE_トイレ.png" data-lightbox="group"><img src="HTML\img\UE_トイレ.png"></a>
                <a href="HTML\img\UE_メニュー.png" data-lightbox="group"><img src="HTML\img\UE_メニュー.png"></a>
                <a href="HTML\img\UE_アイテム.png" data-lightbox="group"><img src="HTML\img\UE_アイテム.png"></a>
                <a href="HTML\img\UE_敵.png" data-lightbox="group"><img src="HTML\img\UE_敵.png"></a>
            </div>
        </div>
        <div class="blueprint">
            <a id="Blueprint"><h2 data-number="04">Blueprint</h2></a>
            <p>Blueprintは、Unreal Engineで使用できる機能(Visual Scripting)です。プログラミングコードの代わりに視覚的なノードを使用してゲームロジックを構築します。各ノードは特定の機能やイベントを表し、ノードをつなげることでゲームの動作を定義したり、オブジェクトの動きを制御したり、ユーザーインターフェースを構築したりすることができます。ここでは、私が作成したBlueprintの一部を紹介します。</p>
            
            <div class="blueprint_block">
                <h2>プレイヤー</h2>
                    <p>ゲーム開始時に赤いノードのEvent BeginPlayから処理が始まり、つながれているノードを実行していきます。Sequenceノードは、Then0を実行し終わるとThen1を順番に実行していきます。</p>
                    <p>タイマーを作成する処理では、時間の変数を作成します。その変数をPause Timer by Handleで停止しておきます。これは、画像下にあるスタミナの実装に必要です。</p>
                    <p>WBPを作成する処理では、ゲーム画面の画像で紹介したようなアイテムスロットや[Tab]メニューなどを変数として作成しています。</p>
                    <p>赤いノードのLeft Shiftは、キーボードの左Shiftを押すとPressedの処理を開始します。Shiftを押している間は、プレイヤーのスピードを変更してスタミナを消費し、Shiftを離している間は、スタミナを回復する処理です。Do Onceノードは、1回のみ処理を通します。Add to Viewportノードは、対応する画面を表示し、Branchノードはifになります。</p>
                    <div class="box">
                        <img class="bp_image" id="0" src="HTML/img/BP_プレイヤー1.png">
                    </div>
                    <p id="p">※マウスホイールで拡大・縮小、"クリック"で移動、もう1回クリックすると停止します。</p>
                    <p>画像上部は、アイテムを取得する処理です。1枚目の画像でタイマーを作成しているので0.3秒ごとにLine Traceを実行します。指定した方向に線を伸ばし、ヒットしたオブジェクトを分析します。それがアイテムであれば、処理はGateノードに進みます。Gateノードは、Enterを実行時にOpen状態であればExitに進みます。その後は、アイテムの画像を取得しアイテムスロットに追加します。</p>
                    <p>画像下部は、別Blueprintから呼び出されます。</p>
                    <div class="box">
                        <img class="bp_image" id="1" src="HTML/img/BP_プレイヤー2.png">
                    </div>
                    <p>画面左上は、特定の状況の場合にキーボードの入力を制限する処理です。これにより、メニューの表示制限を行います。</p>
                    <p>画面真ん中は、アイテムBlueprintからの呼び出しでアイテム効果を付与する処理があります。</p>
                    <p>画面下部のダメージ処理では、救急箱を所持しているかで処理を分岐させています。</p>
                    <div class="box">
                        <img class="bp_image" id="2" src="HTML/img/BP_プレイヤー3.png">
                    </div>
                <h2>敵</h2>
                    <p>画面上部では、敵がプレイヤーとふすまに触れるとダメージを与える処理です。ふすまは、ダメージを与えられると扉を開ける処理をするので敵もふすまを開けることができます。</p>
                    <p>画面真ん中の、On Component Begin Overlapノードは、敵の周囲にOther Actor(今回はプレイヤー)が入るとPlay Soundノード(SEを再生)します。</p>
                    <p>画面下部では、プレイヤーを見つけた際に追いかける処理になっています。On Perception Updatedノードで敵の視界が変わるたびに実行されます。For Each Loopノードで見つけたものを検索し、プレイヤーであれば追いかけます。15秒後にプレイヤーを追っている状態か確認し、そうでなければ見失う状態にしています。</p>
                    <div class="box">
                        <img class="bp_image" id="3" src="HTML/img/BP_敵.png">
                    </div>
                <h2>ふすま</h2>
                    <p>プレイヤーのLine Traceがふすまに当たるとSet Overlay Fusumaノードを呼び出します。これは、アウトライン(オブジェクト周り)の色を変化させることで、プレイヤーがどのオブジェクトを選択しているのか分かりやすくしています。</p>
                    <p>Event AnyDamageノードは、ダメージを受けた際に実行します。Flip Flopノードは、AとBを切り替えながら実行します。タイムラインノードでは、1秒間かけてふすまの座標を変更し、開けている動作を再現しています。</p>
                    <div class="box">
                        <img class="bp_image" id="4" src="HTML/img/BP_ふすま.png">
                    </div>
                <h2>引き出し</h2>
                    <p>画面上部では、引き出しにどのアイテムを配置するのか決める処理です。Random Integerノードで0～39の値をランダムで返します。Switch on Intノードは、対応する値に分岐するため、その値が0～4(10%)の場合にアイテムを生成します。</p>
                    <div class="box">
                        <img class="bp_image" id="5" src="HTML/img/BP_引き出し.png">
                    </div>
                <h2>鍵</h2>
                    <p>鍵などのアイテムスロットに入るアイテムはダメージを受けるとDestoy Actorノード(オブジェクト破壊)を実行し、アイテムを入手したように実装しています。</p>
                    <div class="box">
                        <img class="bp_image" id="6" src="HTML/img/BP_鍵.png">
                    </div>
                <h2>鍵の使用</h2>
                    <p>ここでもプレイヤーのLine Traceを使用します。鍵の付いた引き出しや南京錠を開けるための処理です。</p>
                    <div class="box">
                        <img class="bp_image" id="7" src="HTML/img/BP_鍵_使用.png">
                    </div>
                <h2>アイテムスロット</h2>
                    <p>ここから紹介するのは、Widget Blueprintと呼ばれるUIを作成、制御するBlueprintになります。</p>
                    <p>画面上部では、アイテムスロット(配列)の作成を行います。</p>
                    <p>画面真ん中では、どのアイテムスロットを選択しているかを分かりやすくする処理です。マウスホイールの動きを値に変えて、それによって対応するアイテムスロットに移動します。</p>
                    <p>画面下部では、アイテムを使用する処理です。ステージにアイテムが存在していないとアイテムが持つBlueprintは実行できないので、SpawnActorノードでアイテムを生成します。生成したアイテムを判別し対応する効果を発動します。</p>
                    <div class="box">
                        <img class="bp_image" id="8" src="HTML/img/BP_アイテムスロット.png">
                    </div>
                <h2>アイテムスロット(チェンジイメージ)</h2>
                    <p>このBlueprintは、プレイヤーのLine Trace時に実行されます。Line TraceのところにUpdate Item Imageノードがありますので確認してみてください。アイテムは、自身の画像を所持しているのでBranchノードでそれを判別しています。ここでFlaseに流れるのは、旅館の壁などアイテムではないオブジェクトです。次にFor Each Loopノードでアイテムスロットを順番に検索し、同じアイテムを所持していれば、個数を+1します。所持していなければ、違うアイテムスロットに画像を格納し個数を+1します。</p>
                    <div class="box">                    
                        <img class="bp_image" id="9" src="HTML/img/BP_アイテムスロット_チェンジイメージ.png">
                    </div>
                <h2>アイテムスロット(救急箱)</h2>
                    <p>このBlueprintは、プレイヤーがダメージを受けた際に実行されます。For Each Loopノードで、アイテムスロットを順番に検索し、救急箱を所持しているか判別します。救急箱の効果は、プレイヤーのBlueprintで実行しています。</p>
                    <div class="box">
                        <img class="bp_image" id="10" src="HTML/img/BP_アイテムスロット_救急箱.png">
                    </div>
            </div>    
        <div class="blender">
            <a id="Blender"><h2 data-number="05">Blender</h2></a>
            <p>3Dコンピュータグラフィックスソフトウェアです。こちらを活用し、ゲームで登場する3Dオブジェクトのモデリングをしました。左がBlenderの画面で右がゲームの画面になります。</p>
            <div class="blender_block">
                <a href="HTML/img/B_鳥居.png" data-lightbox="group"><img src="HTML\img\B_鳥居.png"></a>
                <a href="HTML/img/UE_鳥居.png" data-lightbox="group"><img src="HTML\img\UE_鳥居.png"></a>
                <a href="HTML/img/B_ふすま.png" data-lightbox="group"><img src="HTML\img\B_ふすま.png"></a>
                <a href="HTML/img/UE_ふすま.png" data-lightbox="group"><img src="HTML\img\UE_ふすま.png"></a>
                <a href="HTML/img/B_障子.png" data-lightbox="group"><img src="HTML\img\B_障子.png"></a>
                <a href="HTML/img/UE_障子.png" data-lightbox="group"><img src="HTML\img\UE_障子.png"></a>
                <a href="HTML/img/B_行燈.png" data-lightbox="group"><img src="HTML\img\B_行燈.png"></a>
                <a href="HTML/img/UE_行燈.png" data-lightbox="group"><img src="HTML\img\UE_行燈.png"></a>
            </div>
        </div>
        <div class="detail">
            <a href="index.html">戻る</a>
        </div>
    </div>
</body>
</html>
